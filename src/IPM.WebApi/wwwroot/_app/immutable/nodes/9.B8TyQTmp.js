import{b as V,z as C,H as tt,P as et,Z as at}from"../chunks/PrimaryTextField.t_Uysw41.js";import"../chunks/disclose-version.Bg9kRutz.js";import{h as A,a as rt,aG as nt,b as st,aH as it,x as I,c as j,q as ot,U as L,d as ct,L as M,K as Z,ah as z,at as F,aI as G,t as O,p as D,aD as lt,_ as ft,a2 as w,Q as W,a3 as S,W as T,X as U,Y as N,am as X,T as ut,a4 as K,V as x,P as H,Z as dt}from"../chunks/runtime.2TQkkbdU.js";import{d as Y,e as vt}from"../chunks/render.CUPvWneb.js";import{a as m,t as h,b as E}from"../chunks/template.CAbfWL_E.js";import{c as mt}from"../chunks/css-props.BPPcTq2y.js";import{a as P,p as Q}from"../chunks/props.BH3iTQOK.js";import{B as pt,T as _t}from"../chunks/BasicCenterLayout.Bu0Y5AYY.js";import{s as B}from"../chunks/snippet.CGksWYoM.js";import{s as J,c as ht}from"../chunks/attributes.CxDnN36E.js";import{s as yt}from"../chunks/class.BL4Q9A0U.js";import{o as bt,c as gt}from"../chunks/modal.svelte.BtMLvqc4.js";import{t as Ut}from"../chunks/Toaster.svelte_svelte_type_style_lang.Ca3an25N.js";const $=0,k=1,q=2;function Tt(r,t,n,u,c){A&&rt();var s=r,i=nt(),o=ft,e=L,a,d,f,p=(i?M:Z)(void 0),_=(i?M:Z)(void 0),y=!1;function b(l,v){y=!0,v&&(z(g),F(g),G(o));try{l===$&&n&&(a?O(a):a=j(()=>n(s))),l===k&&u&&(d?O(d):d=j(()=>u(s,p))),l!==$&&a&&D(a,()=>a=null),l!==k&&d&&D(d,()=>d=null),l!==q&&f&&D(f,()=>f=null)}finally{v&&(G(null),F(null),z(null),lt())}}var g=st(()=>{if(e!==(e=t())){if(it(e)){var l=e;y=!1,l.then(v=>{l===e&&(I(p,v),b(k,!0))},v=>{if(l===e)throw I(_,v),b(q,!0),_.v}),A?a=j(()=>n(s)):ot(()=>{y||b($,!0)})}else I(p,e),b(k,!1);return()=>e=L}});A&&(s=ct)}async function xt(){try{return await V.get("",{credentials:"include"}).json()}catch(r){return console.error(r),[]}}const kt=async()=>({affiliatedUnit:xt()}),Wt=Object.freeze(Object.defineProperty({__proto__:null,load:kt},Symbol.toStringTag,{value:"Module"}));var Nt=h("<button><!></button>");function R(r,t){w(t,!0);const n=P(t,"onclick",3,()=>{}),u=P(t,"type",3,"button");let c=()=>{switch(t.variant){case"orange":return"button--orange";default:return""}};var s=Nt();s.__click=function(...e){var a;(a=n())==null||a.apply(this,e)};const i=X(()=>ht(c()));var o=T(s);B(o,()=>t.children),U(s),W(()=>{yt(s,N(i),"svelte-dkxh3y"),J(s,"type",u())}),m(r,s),S()}Y(["click"]);var Pt=h('<div class="svelte-1tejpax"><!></div>');function wt(r,t){w(t,!0);var n=Pt(),u=T(n);B(u,()=>t.children),U(n),m(r,n),S()}var St=h('<button class="svelte-cfeqln"><!></button>');function At(r,t){w(t,!0);const n=P(t,"onclick",3,()=>{}),u=P(t,"type",3,"button");var c=St();c.__click=function(...i){var o;(o=n())==null||o.apply(this,i)};var s=T(c);B(s,()=>t.children),U(c),W(()=>J(c,"type",u())),m(r,c),S()}Y(["click"]);const It=C.object({affiliatedUnitName:C.string().nonempty({message:"Tên đơn vị trực thuộc không để trống"})});async function jt(r){try{let t=It.parse(r);return await V.post("",{json:{affiliatedUnitName:t.affiliatedUnitName},credentials:"include"}).json(),{isSuccess:!0,error:null}}catch(t){return t instanceof tt&&t.response.status==401?{isSuccess:!1,error:"Unauthorized"}:{isSuccess:!1,error:t}}}function Dt(r){let t=[];for(let n of r)t.push([n.affiliatedUnitId+"",n.affiliatedUnitName]);return t}var Ht=h("<!> <!>",1),Et=h('<div class="modal"><h4>Thêm đơn vị trực thuộc</h4> <form class="svelte-94k1qb"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></form></div>'),$t=h("<div>Loading</div>"),qt=h("<!> <!>",1);function Xt(r,t){w(t,!0);const n=i=>{var o=Et(),e=x(T(o),2),a=T(e);mt(a,()=>({"--margin-top":"1em","--margin-bottom":"1em"})),et(a.lastChild,{id:"affiliatedUnitName",name:"affiliatedUnitName",type:"text",placeHolder:"",label:"Tên đơn vị trực thuộc",required:!0,get error(){return N(c)},errorId:"affiliatedUnitName"}),U(a);var d=x(a,2);wt(d,{children:(f,p)=>{var _=Ht(),y=K(_);R(y,{variant:"orange",type:"submit",children:(g,l)=>{H();var v=E("Thêm");m(g,v)},$$slots:{default:!0}});var b=x(y,2);At(b,{onclick:()=>gt(),children:(g,l)=>{H();var v=E("Hủy");m(g,v)},$$slots:{default:!0}}),m(f,_)},$$slots:{default:!0}}),U(e),U(o),vt("submit",e,s),m(i,o)};let u=["Mã đơn vị trực thuộc","Tên đơn vị trực thuộc"],c=ut(Q([]));async function s(i){i.preventDefault();const o=new FormData(i.target),e=await jt({affiliatedUnitName:o.get("affiliatedUnitName")});e.isSuccess?Ut.success("Thêm đơn vị thành công"):e.error instanceof at&&dt(c,Q(e.error.issues))}pt(r,{header:"Đơn vị trực thuộc",breadcrumb:["Đơn vị trực thuộc","Danh sách"],children:(i,o)=>{var e=qt(),a=K(e);R(a,{onclick:()=>bt(n),variant:"orange",children:(f,p)=>{H();var _=E("Thêm");m(f,_)},$$slots:{default:!0}});var d=x(a,2);Tt(d,()=>t.data.affiliatedUnit,f=>{var p=$t();m(f,p)},(f,p)=>{var _=X(()=>Dt(N(p)));_t(f,{headers:u,get content(){return N(_)}})}),m(i,e)},$$slots:{default:!0}}),S()}export{Xt as component,Wt as universal};
